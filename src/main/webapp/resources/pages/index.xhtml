<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:cc="http://xmlns.jcp.org/jsf/composite"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:jsf="http://xmlns.jcp.org/jsf" >
	
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Alunos</title>
	
	<!-- CSS -->
	
	<h:outputStylesheet name="bootstrap.min.css" library="libraries/bootstrap/css" /> <!-- BOOTSTRAP CSS CONFIG -->
	<h:outputStylesheet name="fontawesome.min.css" library="font-awesome/css" /> <!-- FONTAWESOME CSS CONFIG -->
	<h:outputStylesheet name="datatables.min.css" library="libraries/dataTables" /> <!-- DATATABLES CSS CONFIG -->
	<h:outputStylesheet library="css/datatable" name="table-style.css" />
			
	<!-- SCRIPT -->
	
	<h:outputScript name="jquery-3.5.1.min.js" library="libraries/jquery" /> <!-- JQUERY CONFIG -->
	<h:outputScript name="bootstrap.bundle.min.js" library="libraries/bootstrap/js" /> <!-- BOOTSTRAP JS CONFIG -->
	<h:outputScript name="datatables.min.js" library="libraries/dataTables" /> <!-- DATATABLE CONFIG -->
	<h:outputScript name="my-datatable.js" library="js/custom-datatable" /> <!-- CUSTOM DATATABLE DEF -->
	<h:outputScript name="all.min.js" library="libraries/font-awesome/js" /> <!-- FONTAWESOME JS CONFIG -->
	
	<!---->
	
</h:head>

<h:body>

<div class="letra text-center mb-1">
<p> Colegio Feliz</p></div>

   
 <div class="container"> 

	<h:form>
		<div class="text-center">
	
			<h:commandButton class="btn btn-primary" value="CADASTRO" action="#{alunoController.goToCadastro}" />
	
  		
 <h:body>  

<h:dataTable id="alunos-table" value="#{alunoController.alunosList}" var="aluno"
styleClass="table table-striped table-bordered table-dark custom-table text-center"
cellspacing="0" width="100%" headerClass="custom-table-header" >  

<h:column>  
<f:facet name="header"> MATRICULA</f:facet>  
<h:outputText value="#{aluno.matricula}"/>  
</h:column>  
<h:column>  
        <f:facet name="header">NOME</f:facet>  
        <h:outputText value="#{aluno.nome}"/>  
</h:column>  
<h:column>  
        <f:facet name="header">IDADE</f:facet>  
<h:outputText value="#{aluno.idade}"/>  
</h:column>  

<h:column>
			<f:facet name="header">ACOES</f:facet>
			<div class="action-links">
				<div id="update-link">					
						<h:commandLink action="#{alunoController.goToAtualizar}" value="" >
							<span><i class="fas fa-user-edit edit-icon"></i></span>
							<f:setPropertyActionListener value="#{aluno.matricula}" target="#{alunoController.param}" />																	
						</h:commandLink>				
				</div>
				<div id="delete-link">					
						<h:commandLink action="#{alunoController.getDeleteInfo}" value="">
							<span><i class="fas fa-trash-alt trash-alt-icon"></i></span>
							<f:setPropertyActionListener  value="#{aluno.matricula}"
								target="#{alunoController.param}" />
							<f:passThroughAttribute name="data-toggle" value="modal" />
							<f:passThroughAttribute name="data-target"
								value="#deleteModal" />
							<f:ajax execute="@form" render="@none" />
						</h:commandLink>					
				</div>
			</div>
		</h:column>

 </h:dataTable> 
  
</h:body>  
  		
  		
  		</div>
  	</h:form>
  	  	  	
  </div>
  
  
		<h:form id="dialog-form"> <!-- DELETE DIALOG -->			
			<div class="modal" id="deleteModal" tabindex="-1" role="dialog"
				aria-labelledby="deleteModalLabel" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title"><b style="color:black;">Deletar Aluno</b></h4>
							<button type="button" class="close" data-dismiss="modal"
								aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
						    <p class="text-center"><b style="color:black;">Deseja deletar aluno(a) : </b>
						   <b style='color: red;'> <h:outputText id="modal-text" value="#{alunoController.aluno.nome} ?" /> </b></p> 	
						</div>
						<div class="modal-footer">
							<div class="submit-modal">
								<h:commandButton id="submitBtn"
									value="SIM"
									class="btn btn-dark" action="#{alunoController.deletar}" >
									<f:setPropertyActionListener value="#{alunoController.aluno.nome}"
								 target="#{alunoController.param}" />
								</h:commandButton>
							</div>
							<div class="cancel-modal">
								<button type="button" class="btn btn-dark" data-dismiss="modal">NAO</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</h:form>
		
</h:body>
</html>